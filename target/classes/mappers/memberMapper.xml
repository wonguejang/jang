<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper       
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wg.dao">
 	<!-- 회원가입 -->
 	<insert id = "insertUser">
		<![CDATA[
			INSERT INTO USERS(id, pw, name) 
			VALUES (#{id},#{pw},#{name})		
		]]>
  	</insert>
   
  	<!-- 로그인 체크 -->
	<select id = "loginCheck" resultType = "java.lang.Integer">
		<![CDATA[
			SELECT COUNT(*)
			FROM users
			WHERE id = #{id} AND pw = #{pw}
		]]>
	</select>   
    
    <!-- 유저정보 가져오기 -->
    <select id = "selectUserDetail" resultType = "com.wg.dto.MemberDto">
    	<![CDATA[
    		SELECT *
    		FROM users
    		WHERE id = #{id}
    	]]>
    </select>
    
    <!-- 포인트 업데이트 -->
    <update id = "updatePoint">
    	<![CDATA[
    		UPDATE USERS
			SET POINT = POINT + #{newPoint}
			WHERE ID = #{id}
    	]]>
    </update>
    
    <select id = "allUser" resultType = "com.wg.dto.MemberDto">
    	<![CDATA[
    		SELECT *
			FROM users
    	]]>
    </select>
    
    
    <update id = "updateUser">
    	<![CDATA[
    		UPDATE users
			SET pw = #{pw},
			    name = #{name},
			    point = #{point}
			WHERE id = #{id}
    	]]>
    </update>
    
    <delete id = "deleteUserById">
    	<![CDATA[
    		DELETE FROM users
    		WHERE id = #{id}
    	]]>
    </delete>
    <update id = "timepointupdate">
    	<![CDATA[
    		UPDATE USERS
    		SET POINT = POINT + #{addPoint}
    	]]>
    </update>
</mapper>
